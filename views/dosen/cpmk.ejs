<%- include('../partials/sidebar'); -%>
<link rel="stylesheet" href="/public/css/table.css" />
<div id="container">
  <div class="">
    <h1 class="navbar-brand mb-3">Capaian Pembelajaran Mata Kuliah (CPMK)</h1>
    <div class="d-flex justify-content-end">
      <button class="button100-form-btn btn-head">
        <% items.forEach((item) => { %>
        <a href="/dosen/<%= item.course_plan_id %>/add-cpmk" class=""><% }) %> TAMBAH </a>
      </button>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="table-wrap">
          <table id="table_id" class="table table-responsive-xl">
            <thead class="thead">
              <tr>
                <th width="1%">KODE</th>
                <th width="30%">DESKRIPSI</th>
                <th width="3%">AKSI</th>
              </tr>
            </thead>

            <tbody>
              <tr class="alert">
                <% items.forEach((item) => { %>
                <td><%= item.code %></td>
                <td><%= item.name %></td>
                <td width="250px">
                  <a class="editb" href="/dosen/<%= item.course_plan_id %>/edit-cpmk/<%= item.id %>"><i class="bx bxs-edit" style="color: #624de3"></i></a>
                  <form action="/dosen/<%= item.course_plan_id %>/CPMK/<%= item.id %>?_method=DELETE" onsubmit="hapus()" class="d-inline" method="post">
                    <button onclick="hapus()" type="submit" class="editb"><i class="bx bx-trash" style="color: #a30d11"></i></button>
                  </form>
                </td>
              </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  function success() {
    Swal.fire("Good job!", "Data deleted", "success")
      .then(function () {
        window.setTimeout(function () {
          window.location = "./CPMK";
        }, 700);
      })
      .catch((error) => console.log(error));
  }

  function hapus() {
    Swal.fire({
      title: "Are you sure?",
      text: "You won't be able to revert this!",
      icon: "warning",
      showCancelButton: true,
      confirmButtonColor: "#3085d6",
      cancelButtonColor: "#d33",
      confirmButtonText: "Yes, delete it!",
    }).then((result) => {
      if (result.isConfirmed) {
        Swal.fire("Good job!", "Data deleted", "success")
          .then(function () {
            window.setTimeout(function () {
              window.location = "./CPMK";
            }, 700);
          })
          .catch((error) => console.log(error));
      }
    });
  }
</script>
<%- include('../partials/footer'); -%>
